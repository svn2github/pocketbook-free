# Makefile for PIO driver Kernel Module
# Copyright(c) 2002 Sigma Designs, Inc.

O_TARGET		:= eink.o


# Objects that export symbols.

export-objs		:= einkdrv.o EinkController.o 



CROSS_COMPILE 	= /usr/local/arm/2.95.3/bin/arm-linux-

AS		= $(CROSS_COMPILE)as
LD		= $(CROSS_COMPILE)ld
CC		= $(CROSS_COMPILE)gcc
CPP		= $(CC) -E
AR		= $(CROSS_COMPILE)ar


WARNINGS = \
 -Wpointer-arith \
 -Wchar-subscripts \
 -Wsign-compare 

BOARD_DESIGN = SD_E0

#LINUXDIR = /usr/local/arm/2.95.3/arm-linux/include
LINUXDIR = /usr/src/s3c2410_kernel2.4.18_r1.1/include
CFLAGS = -Wall $(WARNINGS) -O2 -D__KERNEL__ -D__linux__ -DMODULE -DLINUX -I$(LINUXDIR) -fno-builtin -D$(BOARD_DESIGN)
LDFLAGS = -r

USER_CFLAGS = -O2 -I$(LINUXDIR)
USER_LDFLAGS = -Wl,-elf2flt="-s32768"

all: eink.o

eink.o: einkdrv.o EinkController.o 
	$(LD) $(LDFLAGS) -o $@ $^

einkdrv.o: einkdrv.c 
	$(CC) $(CFLAGS) -o einkdrv.o -c einkdrv.c 


EinkController.o: EinkController.c 
	$(CC) $(CFLAGS) -o EinkController.o -c EinkController.c 



